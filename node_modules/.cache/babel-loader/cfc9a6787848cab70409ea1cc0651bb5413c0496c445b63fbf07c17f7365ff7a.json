{"ast":null,"code":"import _objectSpread from\"/Users/admin/Desktop/xummor-somsa/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from\"react\";import\"./cart.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Cart(_ref){let{onClose,cartItems,updateCartItems,openDelivery}=_ref;const[items,setItems]=useState([]);const[removingItems,setRemovingItems]=useState([]);// 🔹 App dan kelgan cartItems → local items ga sync\nuseEffect(()=>{if(cartItems&&cartItems.length>0){setItems(cartItems.filter(item=>item.quantity>0).map(item=>_objectSpread(_objectSpread({},item),{},{count:item.quantity})));}else{setItems([]);}},[cartItems]);// 🔹 Miqdorni o‘zgartirish\nconst updateCount=(id,type)=>{setItems(prev=>{let updated;if(type===\"inc\"){updated=prev.map(item=>item.id===id?_objectSpread(_objectSpread({},item),{},{count:item.count+1}):item);}else{const item=prev.find(item=>item.id===id);if(item&&item.count===1){// 🔹 animatsiya uchun\nsetRemovingItems(prev=>[...prev,id]);setTimeout(()=>{setItems(prev2=>{const newItems=prev2.filter(i=>i.id!==id);updateCartItems(newItems.map(i=>_objectSpread(_objectSpread({},i),{},{quantity:i.count})));// ⚡️ App ga sync\nsetRemovingItems(p=>p.filter(i=>i!==id));return newItems;});},300);return prev;}else{updated=prev.map(item=>item.id===id?_objectSpread(_objectSpread({},item),{},{count:item.count-1}):item);}}// 🔹 App.jsx dagi cartItems ni ham yangilash\nupdateCartItems(updated.map(i=>_objectSpread(_objectSpread({},i),{},{quantity:i.count})));return updated;});};const orderPrice=items.reduce((sum,item)=>sum+item.price*item.count,0);const deliveryPrice=5000;const totalPrice=orderPrice+deliveryPrice;if(items.length===0){return/*#__PURE__*/_jsxs(\"div\",{className:\"cart-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cart-header\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"cart-close\",onClick:onClose,children:\"\\u2715\"}),/*#__PURE__*/_jsx(\"div\",{className:\"cart-title-section\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"cart-title\",children:\"Savat\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-empty\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Sizning savatingiz bo'sh\"}),/*#__PURE__*/_jsx(\"button\",{className:\"cart-return-menu\",onClick:onClose,children:\"Menuga qaytish\"})]})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"cart-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cart-header\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"cart-close\",onClick:onClose,children:\"\\u2715\"}),/*#__PURE__*/_jsx(\"p\",{className:\"title-sv\",children:\"Savat\"})]}),items.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"cart-item \".concat(removingItems.includes(item.id)?'removing':''),children:[/*#__PURE__*/_jsx(\"img\",{src:item.image[0],alt:item.name,className:\"cart-item-img\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-item-info\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"cart-item-name\",children:item.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"cart-item-price\",children:[item.price.toLocaleString(),\" UZS\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-counter\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"cart-btn\",onClick:()=>updateCount(item.id,\"dec\"),children:\"-\"}),/*#__PURE__*/_jsx(\"span\",{className:\"cart-count\",children:item.count}),/*#__PURE__*/_jsx(\"button\",{className:\"cart-btn\",onClick:()=>updateCount(item.id,\"inc\"),children:\"+\"})]})]},item.id)),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-prices\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cart-price-row\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Buyurtma narxi\"}),/*#__PURE__*/_jsxs(\"span\",{children:[orderPrice.toLocaleString(),\" UZS\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-price-row\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Yetkazib berish narxi\"}),/*#__PURE__*/_jsxs(\"span\",{children:[deliveryPrice.toLocaleString(),\" UZS\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-price-row total\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Jami narx\"}),/*#__PURE__*/_jsxs(\"span\",{children:[totalPrice.toLocaleString(),\" UZS\"]})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"cart-submit\",onClick:openDelivery,children:\"Rasmiylashtirish\"})]});}export default Cart;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","Cart","_ref","onClose","cartItems","updateCartItems","openDelivery","items","setItems","removingItems","setRemovingItems","length","filter","item","quantity","map","_objectSpread","count","updateCount","id","type","prev","updated","find","setTimeout","prev2","newItems","i","p","orderPrice","reduce","sum","price","deliveryPrice","totalPrice","className","children","onClick","concat","includes","src","image","alt","name","toLocaleString"],"sources":["/Users/admin/Desktop/xummor-somsa/src/pages/Cart/Cart.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"./cart.css\";\n\nfunction Cart({ onClose, cartItems, updateCartItems, openDelivery }) {\n  const [items, setItems] = useState([]);\n  const [removingItems, setRemovingItems] = useState([]);\n\n  // 🔹 App dan kelgan cartItems → local items ga sync\n  useEffect(() => {\n    if (cartItems && cartItems.length > 0) {\n      setItems(\n        cartItems\n          .filter(item => item.quantity > 0)\n          .map(item => ({ ...item, count: item.quantity }))\n      );\n    } else {\n      setItems([]);\n    }\n  }, [cartItems]);\n\n  // 🔹 Miqdorni o‘zgartirish\n  const updateCount = (id, type) => {\n    setItems((prev) => {\n      let updated;\n      if (type === \"inc\") {\n        updated = prev.map((item) =>\n          item.id === id ? { ...item, count: item.count + 1 } : item\n        );\n      } else {\n        const item = prev.find(item => item.id === id);\n        if (item && item.count === 1) {\n          // 🔹 animatsiya uchun\n          setRemovingItems(prev => [...prev, id]);\n          setTimeout(() => {\n            setItems((prev2) => {\n              const newItems = prev2.filter((i) => i.id !== id);\n              updateCartItems(newItems.map(i => ({ ...i, quantity: i.count }))); // ⚡️ App ga sync\n              setRemovingItems((p) => p.filter(i => i !== id));\n              return newItems;\n            });\n          }, 300);\n          return prev;\n        } else {\n          updated = prev.map((item) =>\n            item.id === id ? { ...item, count: item.count - 1 } : item\n          );\n        }\n      }\n\n      // 🔹 App.jsx dagi cartItems ni ham yangilash\n      updateCartItems(updated.map(i => ({ ...i, quantity: i.count })));\n      return updated;\n    });\n  };\n\n  const orderPrice = items.reduce((sum, item) => sum + item.price * item.count, 0);\n  const deliveryPrice = 5000;\n  const totalPrice = orderPrice + deliveryPrice;\n\n  if (items.length === 0) {\n    return (\n      <div className=\"cart-container\">\n        <div className=\"cart-header\">\n          <button className=\"cart-close\" onClick={onClose}>✕</button>\n          <div className=\"cart-title-section\">\n            <h2 className=\"cart-title\">Savat</h2>\n          </div>\n        </div>\n        <div className=\"cart-empty\">\n          <p>Sizning savatingiz bo'sh</p>\n          <button className=\"cart-return-menu\" onClick={onClose}>Menuga qaytish</button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"cart-container\">\n      <div className=\"cart-header\">\n        <button className=\"cart-close\" onClick={onClose}>✕</button>\n        <p className=\"title-sv\">Savat</p>\n      </div>\n\n      {/* Mahsulotlar */}\n      {items.map((item) => (\n        <div key={item.id} className={`cart-item ${removingItems.includes(item.id) ? 'removing' : ''}`}>\n          <img src={item.image[0]} alt={item.name} className=\"cart-item-img\" />\n          <div className=\"cart-item-info\">\n            <p className=\"cart-item-name\">{item.name}</p>\n            <p className=\"cart-item-price\">{item.price.toLocaleString()} UZS</p>\n          </div>\n          <div className=\"cart-counter\">\n            <button className=\"cart-btn\" onClick={() => updateCount(item.id, \"dec\")}>-</button>\n            <span className=\"cart-count\">{item.count}</span>\n            <button className=\"cart-btn\" onClick={() => updateCount(item.id, \"inc\")}>+</button>\n          </div>\n        </div>\n      ))}\n\n      {/* Narxlar */}\n      <div className=\"cart-prices\">\n        <div className=\"cart-price-row\">\n          <span>Buyurtma narxi</span>\n          <span>{orderPrice.toLocaleString()} UZS</span>\n        </div>\n        <div className=\"cart-price-row\">\n          <span>Yetkazib berish narxi</span>\n          <span>{deliveryPrice.toLocaleString()} UZS</span>\n        </div>\n        <div className=\"cart-price-row total\">\n          <span>Jami narx</span>\n          <span>{totalPrice.toLocaleString()} UZS</span>\n        </div>\n      </div>\n\n      {/* Rasmiylashtirish button */}\n      <button className=\"cart-submit\" onClick={openDelivery}>Rasmiylashtirish</button>\n    </div>\n  );\n}\n\nexport default Cart;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}