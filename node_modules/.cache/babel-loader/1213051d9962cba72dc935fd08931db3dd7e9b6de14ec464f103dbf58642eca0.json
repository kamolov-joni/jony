{"ast":null,"code":"import _objectSpread from\"/Users/admin/Desktop/xummor-somsa/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from\"react\";import\"./cart.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Cart(_ref){let{onClose,cartItems,updateCartItems,openDelivery}=_ref;const[items,setItems]=useState([]);const[removingItems,setRemovingItems]=useState([]);useEffect(()=>{if(cartItems&&cartItems.length>0&&cartItems.some(item=>item.quantity>0)){setItems(cartItems.filter(item=>item.quantity>0).map(item=>_objectSpread(_objectSpread({},item),{},{count:item.quantity})));}else{setItems([]);}},[cartItems]);// Miqdorni o‘zgartirish\nconst updateCount=(id,type)=>{if(type===\"inc\"){setItems(prev=>{const updated=prev.map(item=>item.id===id?_objectSpread(_objectSpread({},item),{},{count:item.count+1}):item);if(updateCartItems){updateCartItems(updated);}return updated;});}else{const item=items.find(item=>item.id===id);if(item&&item.count===1){// Animatsiya uchun\nsetRemovingItems(prev=>[...prev,id]);setTimeout(()=>{setItems(prev=>{const updated=prev.filter(item=>item.id!==id);if(updateCartItems){updateCartItems(updated);}setRemovingItems(prev=>prev.filter(i=>i!==id));return updated;});},300);}else{setItems(prev=>{const updated=prev.map(item=>item.id===id?_objectSpread(_objectSpread({},item),{},{count:item.count-1}):item);if(updateCartItems){updateCartItems(updated);}return updated;});}}};const orderPrice=items.reduce((sum,item)=>sum+item.price*item.count,0);const deliveryPrice=5000;const totalPrice=orderPrice+deliveryPrice;if(items.length===0){return/*#__PURE__*/_jsxs(\"div\",{className:\"cart-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cart-header\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"cart-close\",onClick:onClose,children:\"\\u2715\"}),/*#__PURE__*/_jsx(\"div\",{className:\"cart-title-section\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"cart-title\",children:\"Savat\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-empty\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Sizning savatingiz bo'sh\"}),/*#__PURE__*/_jsx(\"button\",{className:\"cart-return-menu\",onClick:onClose,children:\"Menuga qaytish\"})]})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"cart-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cart-header\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"cart-close\",onClick:onClose,children:\"\\u2715\"}),/*#__PURE__*/_jsx(\"p\",{className:\"title-sv\",children:\"savat\"})]}),items.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"cart-item \".concat(removingItems.includes(item.id)?'removing':''),children:[/*#__PURE__*/_jsx(\"img\",{src:item.image[0],alt:item.name,className:\"cart-item-img\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-item-info\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"cart-item-name\",children:item.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"cart-item-price\",children:[item.price.toLocaleString(),\" UZS\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-counter\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"cart-btn\",onClick:()=>updateCount(item.id,\"dec\"),children:\"-\"}),/*#__PURE__*/_jsx(\"span\",{className:\"cart-count\",children:item.count}),/*#__PURE__*/_jsx(\"button\",{className:\"cart-btn\",onClick:()=>updateCount(item.id,\"inc\"),children:\"+\"})]})]},item.id)),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-prices\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cart-price-row\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Buyurtma narxi\"}),/*#__PURE__*/_jsxs(\"span\",{children:[orderPrice.toLocaleString(),\" UZS\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-price-row\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Yetkazib berish narxi\"}),/*#__PURE__*/_jsxs(\"span\",{children:[deliveryPrice.toLocaleString(),\" UZS\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-price-row total\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Jami narx\"}),/*#__PURE__*/_jsxs(\"span\",{children:[totalPrice.toLocaleString(),\" UZS\"]})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"cart-submit\",onClick:openDelivery,children:\"Rasmiylashtirish\"})]});}export default Cart;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","Cart","_ref","onClose","cartItems","updateCartItems","openDelivery","items","setItems","removingItems","setRemovingItems","length","some","item","quantity","filter","map","_objectSpread","count","updateCount","id","type","prev","updated","find","setTimeout","i","orderPrice","reduce","sum","price","deliveryPrice","totalPrice","className","children","onClick","concat","includes","src","image","alt","name","toLocaleString"],"sources":["/Users/admin/Desktop/xummor-somsa/src/pages/Cart/Cart.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"./cart.css\";\n\n\nfunction Cart({ onClose, cartItems, updateCartItems, openDelivery }) {\n\n  const [items, setItems] = useState([]);\n  const [removingItems, setRemovingItems] = useState([]);\n\n  useEffect(() => {\n    if (cartItems && cartItems.length > 0 && cartItems.some(item => item.quantity > 0)) {\n      setItems(cartItems.filter(item => item.quantity > 0).map(item => ({ ...item, count: item.quantity })));\n    } else {\n      setItems([]);\n    }\n  }, [cartItems]);\n\n  // Miqdorni o‘zgartirish\n  const updateCount = (id, type) => {\n    if (type === \"inc\") {\n      setItems((prev) => {\n        const updated = prev.map((item) =>\n          item.id === id ? { ...item, count: item.count + 1 } : item\n        );\n        if (updateCartItems) {\n          updateCartItems(updated);\n        }\n        return updated;\n      });\n    } else {\n      const item = items.find(item => item.id === id);\n      if (item && item.count === 1) {\n        // Animatsiya uchun\n        setRemovingItems(prev => [...prev, id]);\n        setTimeout(() => {\n          setItems((prev) => {\n            const updated = prev.filter(item => item.id !== id);\n            if (updateCartItems) {\n              updateCartItems(updated);\n            }\n            setRemovingItems(prev => prev.filter(i => i !== id));\n            return updated;\n          });\n        }, 300);\n      } else {\n        setItems((prev) => {\n          const updated = prev.map((item) =>\n            item.id === id ? { ...item, count: item.count - 1 } : item\n          );\n          if (updateCartItems) {\n            updateCartItems(updated);\n          }\n          return updated;\n        });\n      }\n    }\n  };\n\n\n  \n  const orderPrice = items.reduce((sum, item) => sum + item.price * item.count, 0);\n  const deliveryPrice = 5000;\n  const totalPrice = orderPrice + deliveryPrice;\n\n\n  if (items.length === 0) {\n    return (\n      <div className=\"cart-container\">\n        <div className=\"cart-header\">\n          <button className=\"cart-close\" onClick={onClose}>✕</button>\n          <div className=\"cart-title-section\">\n            <h2 className=\"cart-title\">Savat</h2>\n          </div>\n        </div>\n        <div className=\"cart-empty\">\n          <p>Sizning savatingiz bo'sh</p>\n          <button className=\"cart-return-menu\" onClick={onClose}>Menuga qaytish</button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"cart-container\">\n      <div className=\"cart-header\">\n        <button className=\"cart-close\" onClick={onClose}>✕</button>\n         <p className=\"title-sv\">savat</p>\n       \n      </div>\n\n      {/* Mahsulotlar */}\n      {items.map((item) => (\n        <div key={item.id} className={`cart-item ${removingItems.includes(item.id) ? 'removing' : ''}`}>\n          <img src={item.image[0]} alt={item.name} className=\"cart-item-img\" />\n          <div className=\"cart-item-info\">\n            <p className=\"cart-item-name\">{item.name}</p>\n            <p className=\"cart-item-price\">{item.price.toLocaleString()} UZS</p>\n          </div>\n          <div className=\"cart-counter\">\n            <button className=\"cart-btn\" onClick={() => updateCount(item.id, \"dec\")}>-</button>\n            <span className=\"cart-count\">{item.count}</span>\n            <button className=\"cart-btn\" onClick={() => updateCount(item.id, \"inc\")}>+</button>\n          </div>\n        </div>\n      ))}\n\n      {/* Narxlar */}\n      <div className=\"cart-prices\">\n        <div className=\"cart-price-row\">\n          <span>Buyurtma narxi</span>\n          <span>{orderPrice.toLocaleString()} UZS</span>\n        </div>\n        <div className=\"cart-price-row\">\n          <span>Yetkazib berish narxi</span>\n          <span>{deliveryPrice.toLocaleString()} UZS</span>\n        </div>\n        <div className=\"cart-price-row total\">\n          <span>Jami narx</span>\n          <span>{totalPrice.toLocaleString()} UZS</span>\n        </div>\n      </div>\n\n      {/* Rasmiylashtirish button */}\n      <button className=\"cart-submit\" onClick={openDelivery}>Rasmiylashtirish</button>\n     \n    </div>\n  );\n}\n\nexport default Cart;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}